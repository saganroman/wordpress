/*! mpce-simple-contact-form-addon - v1.2.0 - 2018-06-15 */

!function(s){s(function(){for(var e=s(":checkbox[required]"),t=[],c=0;c<e.length;++c){var a=e[c].name;t.push(a)}for(var c in t=t.reduce(function(e,a){return e.indexOf(a)<0&&e.push(a),e},[]))!function(){var e=t[c],a=s('input[name="'+e+'"]');a.change(function(){a.is(":checked")?a.removeAttr("required"):a.attr("required","required")})}()}),s.fn.serializeObject=function(){var e={},a=this.serializeArray();return s.each(a,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},s(document).ready(function(){s("body").on("MPCEObjectUpdated",function(e,a,t){s(".cfa-captcha",a).each(function(e,a){grecaptcha.render(a.id,{sitekey:MPCE_CFA_Ajax.sitekey})})}),s.webshims.polyfill("forms forms-ext"),s(".mpce-cfa-form").unbind("submit").on("submit",function(e){e.preventDefault();var n=s(this),i=s(this).find(".mpce-cfa-loader"),a=s(".cfa-captcha",n).first();if(0!==a.length&&!grecaptcha.getResponse(s(a).data("widget"))){var t=n.find(".cfa-captcha-error");return s(t).fadeIn(),setTimeout(function(){s(t).fadeOut()},3500),!1}i.fadeIn();var c={action:"mpce_cfa_contact_ajax"};c.security=MPCE_CFA_Ajax.security;var r=s("input,select,textarea",n).serializeObject();return r=s.extend(!0,r,c),s.ajax({data:r,type:"POST",url:MPCE_CFA_Ajax.ajaxurl,success:function(e){if(i.fadeOut(),e&&!0===e.success){var a=s(".mpce-cfa-success",n);(t=s(".mpce-cfa-message",n)).html('<div class="mpce-cfa-success"> '+MPCE_CFA_Ajax.success+"</div>"),s(t).fadeIn(200),s(a).fadeIn(200),setTimeout(function(){s(t).fadeOut(),s(a).fadeOut()},3500)}else{var t,c=s(".mpce-cfa-fail",n);(t=s(".mpce-cfa-message",n)).html('<div class="mpce-cfa-fail"> '+MPCE_CFA_Ajax.fail+": "+e.errors+"</div>"),s(t).fadeIn(200),s(c).fadeIn(200),setTimeout(function(){s(t).fadeOut(),s(c).fadeOut()},3500)}},error:function(e){i.fadeOut(),console.log(e)}}),n[0].reset(),0!==a.length&&grecaptcha.reset(s(a).data("widget")),e.stopImmediatePropagation(),!1})})}(jQuery);var widgets=[];function mpce_cfa_onloadCallback(){for(var e=document.getElementsByClassName("cfa-captcha"),a=0;a<e.length;a++){var t=grecaptcha.render(e[a].id,{sitekey:MPCE_CFA_Ajax.sitekey});widgets.push(t),e[a].setAttribute("data-widget",t)}}